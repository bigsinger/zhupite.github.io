---
layout:		post
category:	"sec"
title:		"frida使用汇总"

tags:		[]
---
- Content
{:toc}




## 旧设备低系统使用frida

- 设备：Redmi3S ，安卓6.0.1，已ROOT。

这种旧手机肯定需要安装老版本的frida，同样的Python也可能需要安装较早版本，为避免影响其他Python的正常使用，推荐在电脑上安装`pyenv`，方便随意切换Python版本，参考：[Windows 安装 Pyenv](https://juejin.cn/post/7290725466075054121)

先找到支持安卓6.0.1的frida版本：12.9.7

| Android版本         | Frida版本     | frida-tools | Python |
| ------------------- | :------------ | :---------- | ------ |
| Android 4.1 - 4.3   | Frida 12.6.13 |             |        |
| Android 4.4         | Frida 12.7.0  |             |        |
| Android 5.0 - 5.1   | Frida 12.8.1  |             |        |
| Android 6.0 - 6.0.1 | Frida 12.9.7  | 5.1.0       | 3.8    |
| Android 7.0 - 7.1   | Frida 12.9.8  |             |        |
| Android 8.0 - 8.1   | Frida 12.10.4 |             |        |
| Android 9           | Frida 12.11.7 | 8.1.3       | 3.8    |
| Android 10          | Frida 12.12.0 |             |        |
| Android 11          | Frida 12.12.2 |             |        |

在较新的Python下是无法直接通过pip install的方式安装frida的，会报错：

```
PyPI no longer supports the XMLRPC package_releases method. Use JSON or Simple API instead.
```

只能通过离线包进行安装，到 [Links for frida](https://pypi.tuna.tsinghua.edu.cn/simple/frida/) 找到对应的版本，适合Windows10且Python3.X的包就只有：[frida-12.9.7-py3.8-win-amd64.egg](https://pypi.tuna.tsinghua.edu.cn/packages/e3/3a/c06d25e3dae55679c63e6582f452c04edef15158a9669e36eba09f54ed92/frida-12.9.7-py3.8-win-amd64.egg#sha256=5e97329dda60e85fca38770be725d96d008d27cf90b138599cc99658a7a4d04d)

而且可以看出，我们需要使用Python3.8，通过：

```
pyenv install -l | findstr 3.8
```

可以查询出最大可用的版本是3.8.10，安装：

```
pyenv install 3.8.10
```

安装成功后要切换Python到这个版本，发现使用`pyenv global 3.8.10`并不能成功切换。但是在使用 `pyenv versions` 查看本地安装的版本的时候，能够看出当前版本是在文件`%USERPROFILE%\.python-version`文件里指定的，只需要打开编辑该文件，修改为`3.8.10`即可。然后再次执行 `pyenv versions`查看当前版本已经正确切换了。

`egg`包是早期的Python离线安装包，新的`whl`格式的包。安装egg包需要使用`easy_install`，需要安装三方工具库：`setuptools`。

较新的`setuptools`安装后不会生成`easy_install`，需要安装一个较老的版本，这里选择 `setuptools==50.3.2` 是因为该版本已知会生成 `easy_install`。

```bash
pip install setuptools==50.3.2
```

安装成功后安装egg包：

```bash
easy_install frida-12.9.7-py3.8-win-amd64.egg
```

之后就可以安装12.9.7版本的frida了：

```bash
pip install frida==12.9.7 -i https://pypi.tuna.tsinghua.edu.cn/simple
pip install frida-tools==5.1.0 -i https://pypi.tuna.tsinghua.edu.cn/simple
```

**注意**`frida-tools`一定要在后面安装且必须指定相应的版本，如果不填版本默认会安装成最新版本的frida。

后续在手机安装`frida-server`及脚本就都一样了。
