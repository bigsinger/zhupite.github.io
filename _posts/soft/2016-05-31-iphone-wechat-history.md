---
layout:		post
category:	"soft"
title:		"iPhone苹果手机微信聊天记录导出备份全攻略"
tags:		[wechat,iphone]
---
- Content
{:toc}


想要导出微信聊天记录并备份的需求各种各样，也试过官方提供的备份功能：一个是聊天记录迁移，一个是微信电脑版设置里面的聊天备份，试过均不能满足需求。



先说说手机上的聊天记录迁移，首选需要两部手机，迁移的时候尼玛弄个二维码给我扫，真是二维码用上瘾了，我备份个聊天记录还要搞两部手机，神经病！好不容易找台安卓手机，两部手机都在wifi下操作，尼玛提示我wifi下网络不稳定，非要逼人开热点操作，神经病！你家wifi才不稳定呢，果断放弃这个方法。



再说说微信电脑版设置里面的聊天备份，先说说这个功能会引起什么误解：

如果手机上的聊天记录非常多，而电脑版的聊天记录比较少，那么究竟是合并还是手机聊天覆盖电脑上的聊天记录。



当然最后我理解为优先使用手机上的聊天记录，但是理解的过程太过曲折。然后就开始操作，尼玛提示只能安卓手机支持，iPhone不支持，混蛋！



官方提供的不行，只能借助工具了，又是经过一番痛苦的摸索试探挣扎的过程，这里把使用的工具罗列一下：

- **iTool**我在早期用过，软件体验比较好，但是在iOS8.3以上失效，所以不能用了，希望官方尽快升级支持。
- **同步助手**是可以获取到的，就是太长太多的时候翻页麻烦，而且速度超级超级超级慢，卡卡卡卡好久，这个强烈不推荐，而且超级流氓地把APK后缀文件强制更改打开方式，图标也都全部改为黄不拉几的颜色，看着就膈应，先卸载图个清净。
- **91助手**也不行，甚至iPhone手机都识别不上，垃圾中的战斗机。



最后就要放弃的时候找到了**PP助手**，这个可以曲线实现目的，后面单独说。



**最后采取的办法是先备份出数据，再借助三方工具转换聊天记录。**



所需要的工具：

- PP助手
- [微信聊天记录查看器（程序+源码） - iOS版](http://www.cnblogs.com/cxun/p/4338643.html)



先用PP助手备份数据，找到「备份还原」：

![img](..\..\images\2016\8b7978574ecc45058df99234ce86a308\clipboard.png)

选择「新建备份」，并选择一个本地目录作为备份地址：

![img](..\..\images\2016\7673491b824f4fff9bdbf7b4be2ee0a0\clipboard.png)



提示备份时间较久，而且最好不要处于锁屏状态，但是实际上备份的时间没那么久，还是比较快的，备份成功后会出现一条备份记录，同时E:\beifen目录下会有一个 **deced7d99d74f1e9c05b07e04b417994fa67b5bb-20160531-191734** 类似的目录。

![img](..\..\images\2016\f8a717ab8dff42e486fe5693bf923cad\clipboard.png)



目录里面都是MD5值类似的文件，不太好知道哪个才是微信聊天记录文件，需要继续使用PP助手来查找一下。



在PP助手里，双击打开上面的备份记录，找到 **AppDomain-com.tencent.xin** 并打开，再打开里面的**Documents**目录，会看到一串数字的目录，打开它，再打开里面的DB目录，会看到一个**MM.sqlite**的文件，如图：

![img](..\..\images\2016\627756af0fb74ac1b184878199465e7f\clipboard.png)



例如我这里微信聊天记录有12.91MB，然后就在我电脑的备份文件中按大小排序，找到一个差不多大小的文件：

d0a604c786a24adff267a53144965c53ed37d203，那这个就是那个MM.sqlite文件。

![img](..\..\images\2016\69dc803a2a094cc8a46d5770abc60304\clipboard.png)



这个聊天记录文件是个sqlite数据库，是可以直接用[SQLite Expert Professional](http://www.sqliteexpert.com/download.html)打开的，但是如果只是打开的话也没什么意思。我们想要一个好看的效果，最好能和手机里面聊天的形式差不多那才较好，擎出大宝剑[微信聊天记录查看器（程序+源码） - iOS版](http://www.cnblogs.com/cxun/p/4338643.html)，这个工具可以直接在[GitHub](https://github.com/cxun/WeChatHistory)上下载的，目前最新的版本是1.0.1.6，相信作者以后还会有所更新的。

这个工具可以直接打开上面的聊天文件并展示，效果非常理想，速度也非常快：

![img](..\..\images\2016\f3d2aea32b924ff1b40ef76c9b9186db\clipboard.png)

代码看了下，是生成出网页后再在**EO.WebBrowser**控件里加载显示的，好在生成的网页是一次性全部生成的，在系统临时目录下有一个**WeChatHistoryTmp**目录，里面会有与某个人的所有聊天记录，直接用浏览器打开看就可以了，例如我的目录：

```
C:\Users\xxxxxx\AppData\Local\Temp\WeChatHistoryTmp\tmpE42D_tmp
```

唯一不足的是emoji路径用的是绝对路径，应该用相对路径，不过没关系，我写一个脚本批量替换一下就可以了，这样我备份的时候只需要备份这些网页和emoji目录就可以了，以后可以随时打开看啦，而且相当轻便。



例如选择与某人的聊天记录后，在临时文件夹下生成了350个网页，一次性拖入SublimeText打开（UltraEdit完败，打开这么多卡死），进行全部替换和保存，主要是把emoji的路径从绝对路径替换为相对路径，重新组织的文件格式为：

![img](..\..\images\2016\bcf92060c0cc43f1902af878e29d9477\clipboard.png)

最后全部压缩为：留你年复一年朗读.rar，发送给妹子，完毕~



**参考资料：**

- [iphone微信聊天记录在哪个文件夹](http://jingyan.baidu.com/article/e6c8503c1c55d4e54f1a18d8.html)
- [SQLite Expert Professional](http://www.sqliteexpert.com/download.html)
- [PP助手](http://pro.25pp.com/)
- [微信聊天记录查看器（程序+源码） - iOS版](http://www.cnblogs.com/cxun/p/4338643.html)
- [如何导出及恢复微信聊天记录 - 楼月微信聊天记录导出恢复助手](http://www.louyue.com/weixin.htm)



